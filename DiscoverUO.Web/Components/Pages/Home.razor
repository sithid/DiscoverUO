@inject HttpClient client
@page "/"

<PageTitle>Home</PageTitle>

<MudText Style="font-size: 64px" Align="Align.Center" Color="Color.Primary" GutterBottom="true">Welcome to DiscoverUO!</MudText>
<MudContainer MaxWidth="MaxWidth.Medium">
    @if( UserSession.PublicServers.Count > 0 )
    {
        <PublicServersComponent/>
    }
    else
    {
        <MudText Typo="Typo.h3" Align="Align.Center" Color="Color.Primary" GutterBottom="true">The public serverlist is empty.</MudText>
    }
</MudContainer>
@code
{
    [CascadingParameter]
    public SessionManager UserSession{ get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();

        var rsp = UserSession.GetPublicServersList(client);

        if( rsp.Success )
        {
            Console.WriteLine($"Server data pulled, Public serverlist contains {UserSession.PublicServers.Count} servers.");
        }

    }
}
