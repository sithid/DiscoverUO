@using Blazored.LocalStorage
@using System.Net
@inject ILocalStorageService _localStorage
@inject HttpClient _client

<MudNavMenu Color="Color.Secondary">
    <MudNavGroup Title="DiscoverUO" Expanded="true">
        @if (DashboardData != null)
        {
            <MudNavLink Href="/dashboard" Match="NavLinkMatch.All">Dashboard</MudNavLink>
            <MudNavLink Href="/favorites" Match="NavLinkMatch.Prefix">Favorites</MudNavLink>
        }

        <MudNavLink Href="/servers" Match="NavLinkMatch.All">Server List</MudNavLink>
    </MudNavGroup>
</MudNavMenu>

@code{

    [Parameter]
    public DashboardData DashboardData { get; set; }

    protected async override Task OnAfterRenderAsync( bool firstRender)
    {
        if (!firstRender)
        {
            DashboardData = await DataManager.GetDashboard(_client, _localStorage);
            StateHasChanged();
        }
    }
}